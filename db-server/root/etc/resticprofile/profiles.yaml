# yaml-language-server: $schema=https://creativeprojects.github.io/resticprofile/jsonschema/config.json

version: "1"

global:
  restic-lock-retry-after: "1m"
  restic-stale-lock-age: "4h"

default:
  repository: "rest:https://restic.anshulg.com/rpi4-restic/"
  initialize: false
  password-file: "/home/anshulgupta/backup/password.txt"
  compression: "max"
  force-inactive-lock: true

  systemd-drop-in-files:
    - "10auth.conf"

  retention:
    before-backup: false
    after-backup: true
    keep-hourly: 24
    keep-daily: 7
    keep-weekly: 4
    keep-monthly: 12
    keep-yearly: 1
    prune: false
    host: true

  backup:
    stdin-command:
      - "sudo -u postgres pg_dumpall --clean --if-exists"
    tag:
      - "rpi4-postgres"
    schedule: 'hourly'
    schedule-permission: system
    schedule-priority: background
    schedule-after-network-online: true
