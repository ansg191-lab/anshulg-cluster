apiVersion: oauth.anshulg.com/v1
kind: Proxy
metadata:
  name: bazarr
spec:
  provider:
    type: oidc
    clientId: bazarr
    clientExistingSecret:
      name: oauth-config
      key: OAUTH2_PROXY_CLIENT_SECRET
    codeChallengeMethod: S256
    oidcIssuerUrl: https://auth.anshulg.com/oauth2/openid/bazarr
  cookie:
    existingSecret:
      name: oauth-config
      key: OAUTH2_PROXY_COOKIE_SECRET
    secure: true
  proxy:
    emailDomains:
      - "*"
    reverseProxy: true
  upstream:
    upstreams:
      - http://bazarr.bazarr.svc.cluster.local/
